# DecentraLabs Lab Gateway - Full Version Environment Configuration
# This file contains all environment variables for the full version with auth2 service

# =============================================================================
# BASIC CONFIGURATION
# =============================================================================

# Server configuration
SERVER_NAME=localhost
HTTPS_PORT=443
HTTP_PORT=80

# OpenResty bind address (127.0.0.1 for local-only, 0.0.0.0 for public)
OPENRESTY_BIND_ADDRESS=127.0.0.1
# OpenResty bind ports (local ports on the host)
OPENRESTY_BIND_HTTPS_PORT=443
OPENRESTY_BIND_HTTP_PORT=80
# Deployment mode (informational)
DEPLOY_MODE=direct

# Host UID/GID for bind mounts (Linux/macOS)
# setup.sh will auto-fill these values.
HOST_UID=1000
HOST_GID=1000

# =============================================================================
# MYSQL DATABASE CONFIGURATION
# =============================================================================

MYSQL_ROOT_PASSWORD=CHANGE_ME
MYSQL_DATABASE=guacamole_db
MYSQL_USER=guacamole_user
MYSQL_PASSWORD=CHANGE_ME

# =============================================================================
# GUACAMOLE CONFIGURATION
# =============================================================================

GUAC_ADMIN_USER=guacadmin
GUAC_ADMIN_PASS=CHANGE_ME
AUTO_LOGOUT_ON_DISCONNECT=true

# =============================================================================
# TLS / CERTBOT CONFIGURATION
# =============================================================================

# Let's Encrypt / certbot - optional automation for obtaining real TLS certificates.
# Comma-separated list of domains and an email for ACME. Leave empty if using self-signed/dev.
CERTBOT_DOMAINS=
CERTBOT_EMAIL=
#CERTBOT_STAGING=0

# =============================================================================
# CLOUDFLARE TUNNEL
# =============================================================================

# This configuration is optional - to expose the gateway without public IP
# Set ENABLE_CLOUDFLARE=true to start the cloudflared sidecar (docker compose --profile cloudflare up -d)
# If you have a token from a Cloudflare tunnel, paste it below. If empty, a Quick Tunnel will be used.
ENABLE_CLOUDFLARE=false
CLOUDFLARE_TUNNEL_TOKEN=

# =============================================================================
# SECRETS AND KEYS
# =============================================================================

# OPS worker
# Set to empty to disable /ops endpoints.
OPS_SECRET=CHANGE_ME
# Lab Manager access token (separate from SECURITY_INTERNAL_TOKEN).
LAB_MANAGER_INTERNAL_TOKEN=CHANGE_ME
LAB_MANAGER_INTERNAL_TOKEN_HEADER=X-Lab-Manager-Token
LAB_MANAGER_INTERNAL_TOKEN_COOKIE=lab_manager_token
# WebAuthn proof (shared secret with Blockchain Services)
INTENT_WEBAUTHN_HMAC_SECRET=CHANGE_ME

# =============================================================================
# BLOCKCHAIN RPC CONFIGURATION
# =============================================================================

# Sepolia RPC endpoints (comma-separated). Keep these updated or use a paid provider.
ETHEREUM_SEPOLIA_RPC_URL=https://ethereum-sepolia-rpc.publicnode.com,https://0xrpc.io/sep,https://ethereum-sepolia-public.nodies.app

# =============================================================================
# BLOCKCHAIN-SERVICES INTERNAL ACCESS
# =============================================================================

# Internal token for /wallet, /treasury, /wallet-dashboard (sent by OpenResty).
SECURITY_INTERNAL_TOKEN=CHANGE_ME
SECURITY_INTERNAL_TOKEN_HEADER=X-Internal-Token
SECURITY_INTERNAL_TOKEN_COOKIE=internal_token
SECURITY_INTERNAL_TOKEN_REQUIRED=true
SECURITY_ALLOW_PRIVATE_NETWORKS=true
ADMIN_DASHBOARD_ALLOW_PRIVATE=true

# =============================================================================
# BLOCKCHAIN-SERVICES FEATURES
# =============================================================================

# Enable provider registration endpoints.
FEATURES_PROVIDERS_REGISTRATION_ENABLED=true

# Treasury admin EIP-712 signature domain (optional overrides)
TREASURY_ADMIN_DOMAIN_NAME=DecentraLabsTreasuryAdmin
TREASURY_ADMIN_DOMAIN_VERSION=1
TREASURY_ADMIN_DOMAIN_CHAIN_ID=11155111
TREASURY_ADMIN_DOMAIN_VERIFYING_CONTRACT=

# =============================================================================
# CORS CONFIGURATION (OpenResty)
# =============================================================================

# Comma-separated list of allowed origins for browser clients.
# Leave empty to only allow same-origin requests.
CORS_ALLOWED_ORIGINS=

# Blockchain-services wallet/treasury CORS allowlist.
# Must include the gateway origin to allow /wallet and /treasury from the browser.
WALLET_ALLOWED_ORIGINS=
