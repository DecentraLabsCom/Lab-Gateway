# DecentraLabs Lab Gateway - Full Version Environment Configuration
# This file contains all environment variables for the full version with auth2 service

# =============================================================================
# BASIC CONFIGURATION
# =============================================================================

# Server configuration
SERVER_NAME=localhost
HTTPS_PORT=443
HTTP_PORT=80
# Optional JWT issuer override expected by OpenResty (must match token iss exactly).
# Leave empty to auto-build as https://<SERVER_NAME>[:<HTTPS_PORT>]/auth.
# If set to an external Full issuer (Lite mode), the gateway auto-syncs the JWT public key
# from https://<issuer-origin>/.well-known/public-key.pem.
# Lite mode also disables local auth/treasury/intents endpoints in this gateway instance.
ISSUER=

# OpenResty bind address (127.0.0.1 for local-only, 0.0.0.0 for public)
OPENRESTY_BIND_ADDRESS=127.0.0.1
# OpenResty bind ports (local ports on the host)
OPENRESTY_BIND_HTTPS_PORT=443
OPENRESTY_BIND_HTTP_PORT=80

# Host UID/GID for bind mounts (Linux/macOS)
# setup.sh will auto-fill these values.
HOST_UID=1000
HOST_GID=1000

# =============================================================================
# MYSQL DATABASE CONFIGURATION
# =============================================================================

MYSQL_ROOT_PASSWORD=CHANGE_ME
MYSQL_DATABASE=guacamole_db
MYSQL_USER=guacamole_user
MYSQL_PASSWORD=CHANGE_ME
# Optional override for blockchain-services schema
BLOCKCHAIN_MYSQL_DATABASE=blockchain_services

# =============================================================================
# GUACAMOLE CONFIGURATION
# =============================================================================

GUAC_ADMIN_USER=guacadmin
GUAC_ADMIN_PASS=CHANGE_ME
AUTO_LOGOUT_ON_DISCONNECT=true

# =============================================================================
# TLS / CERTBOT CONFIGURATION
# =============================================================================

# Let's Encrypt / certbot - optional automation for obtaining real TLS certificates.
# Comma-separated list of domains and an email for ACME. Leave empty if using self-signed/dev.
CERTBOT_DOMAINS=
CERTBOT_EMAIL=
#CERTBOT_STAGING=0

# =============================================================================
# CLOUDFLARE TUNNEL
# =============================================================================

# This configuration is optional - to expose the gateway without public IP
# Start the sidecar with compose profile: --profile cloudflare or --profile cloudflare-token
# If you have a token from a Cloudflare tunnel, paste it below. If empty, a Quick Tunnel will be used.
CLOUDFLARE_TUNNEL_TOKEN=

# =============================================================================
# SECRETS AND KEYS
# =============================================================================

# Lab Manager access token (used by /lab-manager and /ops).
# Set to empty to disable /ops endpoints (and keep /lab-manager private-network-only).
LAB_MANAGER_TOKEN=CHANGE_ME
LAB_MANAGER_TOKEN_HEADER=X-Lab-Manager-Token
LAB_MANAGER_TOKEN_COOKIE=lab_manager_token

# Wallet/Treasury access token
# Used by /wallet, /treasury, /wallet-dashboard and /treasury/admin/** (sent by OpenResty).
TREASURY_TOKEN=CHANGE_ME
TREASURY_TOKEN_HEADER=X-Access-Token
TREASURY_TOKEN_COOKIE=access_token
TREASURY_TOKEN_REQUIRED=true
SECURITY_ALLOW_PRIVATE_NETWORKS=true
ADMIN_DASHBOARD_ALLOW_PRIVATE=true

# =============================================================================
# CORS CONFIGURATION (OpenResty)
# =============================================================================

# Comma-separated list of allowed origins for browser clients.
# Default includes the DecentraLabs Marketplace. Add your own origins as needed.
# Leave empty to use MARKETPLACE_URL as the only allowed origin (recommended).
CORS_ALLOWED_ORIGINS=

# Blockchain-specific settings (CONTRACT_ADDRESS, ETHEREUM_*_RPC_URL,
# WALLET_ALLOWED_ORIGINS, ALLOWED_ORIGINS, MARKETPLACE_PUBLIC_KEY_URL, etc.)
# belong in blockchain-services/.env.
