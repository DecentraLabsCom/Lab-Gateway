# Server configuration
base.domain=https://sarlab.dia.uned.es
server.servlet.context-path=/auth

# Endpoint paths
endpoint.auth=/auth
endpoint.auth2=/auth2
endpoint.jwks=/jwks
endpoint.message=/message
endpoint.marketplace-auth=/marketplace-auth
endpoint.marketplace-auth2=/marketplace-auth2
endpoint.guacamole=/guacamole
endpoint.health=/health

server.tomcat.uri-encoding=UTF-8
spring.jndi.ignore=true

# Set the server port to 8080 (default)
server.port=8080

# Enable debugging for Spring Boot logs
#logging.level.org.springframework=DEBUG
#logging.level.org.springframework.web=DEBUG

# Blockchain and smart contract configuration
contract.address=0xContractAddress
rpc.url=https://rpc.blockchain.com
wallet.address=0x183F062B6A8C39B9A9e71898741ACf8f25E11561
# TODO: Add private key
wallet.private.key=0xPrivateKey

# JWT Encryption configuration
private.key.path=/home/luis/auth-service-keys/private_key.pem
public.key.path=/home/luis/auth-service-keys/public_key.pem
public.certificate.path=/home/luis/auth-service-keys/certificate.pem

# Spring Security configuration - TODO: check for production
allowed-origins=http://localhost:3000,https://marketplace-decentralabs.vercel.app

# Marketplace JWT authentication
# URL where the marketplace exposes its public key for JWT validation
marketplace.public-key-url=https://marketplace-decentralabs.vercel.app/.well-known/public-key.pem

# Security Notes:
# 1. The marketplace.public-key-url should serve a PEM-encoded RSA public key
# 2. The marketplace endpoint should be secured with HTTPS
# 3. The auth-service will cache the public key for 24 hours and refresh on signature failures
# 4. JWTs from marketplace should include user claims like:
#    - sub: user identifier  
#    - email: user email
#    - uid: user ID from SAML
#    - displayName: user display name
#    - schacHomeOrganization: user affiliation
#    - eduPersonAffiliation: user role
#    - eduPersonScopedAffiliation: scoped role
# 5. Example marketplace public key endpoint format:
#    GET https://marketplace-decentralabs.vercel.app/.well-known/public-key.pem
#    Content-Type: text/plain
#    Response: -----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFA...\n-----END PUBLIC KEY-----